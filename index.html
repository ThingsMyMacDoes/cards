<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Image Viewer</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <style>
    html, body {
      margin: 0;
      width: 100%;
      height: 100dvh;
      background: black;
      overflow: hidden;
      font-family: system-ui, sans-serif;
      color: white;
      cursor: none;
    }

    #viewer {
      width: 100vw;
      height: 100dvh;
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    /* IMAGE AREA (80%) */
    #image-container {
      width: 100%;
      height: 80%;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    #image {
      width: 100%;
      height: 100%;
      object-fit: contain;
    }

    /* TEXT AREA (20%) */
    #caption {
      width: 100%;
      height: 20%;
      box-sizing: border-box;
      padding: 16px 24px;
      background: rgba(0, 0, 0, 0.85);
      font-size: 1rem;
      line-height: 1.4;
      overflow-y: auto;
    }

    /* UI elements */
    .ui {
      opacity: 0;
      transition: opacity 0.3s ease;
      pointer-events: none;
    }

    .ui.visible {
      opacity: 1;
      pointer-events: auto;
    }

    .nav {
      position: absolute;
      top: 40%;
      transform: translateY(-50%);
      background: rgba(0, 0, 0, 0.6);
      color: white;
      border: none;
      font-size: 2.5rem;
      padding: 0.75rem 1.25rem;
      cursor: pointer;
      user-select: none;
    }

    #prev { left: 10px; }
    #next { right: 10px; }

    #counter {
      position: absolute;
      bottom: 22%;
      right: 12px;
      background: rgba(0, 0, 0, 0.6);
      padding: 6px 10px;
      border-radius: 4px;
      font-size: 0.9rem;
    }

    #fullscreen {
      position: absolute;
      bottom: 22%;
      left: 12px;
      background: rgba(0, 0, 0, 0.6);
      border: none;
      padding: 6px 10px;
      font-size: 0.9rem;
      color: white;
      cursor: pointer;
    }
  </style>
</head>
<body>

  <div id="viewer">
    <button id="prev" class="nav ui">❮</button>

    <div id="image-container">
      <img id="image" alt="Image Viewer">
    </div>

    <button id="next" class="nav ui">❯</button>

    <div id="caption"></div>

    <div id="counter" class="ui"></div>
    <button id="fullscreen" class="ui">Fullscreen (F)</button>
  </div>

  <script>
    // ===== CONFIG =====
    const IMAGE_COUNT = 74;
    const IMAGE_PATH = "";
    const TEXT_PATH = "";
    const IMAGE_PREFIX = "IMG_";
    const IMAGE_EXT = ".jpg";
    const TEXT_EXT = ".txt";
    const PAD_LENGTH = 4;
    const UI_HIDE_DELAY = 2000;
    // ==================

    const images = [];
    const texts = [];

    for (let i = 1; i <= IMAGE_COUNT; i++) {
      const num = String(i).padStart(PAD_LENGTH, "0");
      images.push(`${IMAGE_PATH}${IMAGE_PREFIX}${num}${IMAGE_EXT}`);
      texts.push(`${TEXT_PATH}${IMAGE_PREFIX}${num}${TEXT_EXT}`);
    }

    let index = 0;
    let uiTimeout;

    const img = document.getElementById("image");
    const caption = document.getElementById("caption");
    const counter = document.getElementById("counter");
    const viewer = document.getElementById("viewer");
    const uiElements = document.querySelectorAll(".ui");

    async function loadText(path) {
      try {
        const res = await fetch(path);
        if (!res.ok) throw new Error();
        return await res.text();
      } catch {
        return "No description available for this image.";
      }
    }

    async function showImage(i) {
      if (i < 0) i = images.length - 1;
      if (i >= images.length) i = 0;

      index = i;
      img.src = images[index];
      counter.textContent = `${index + 1} / ${images.length}`;

      caption.textContent = "Loading description...";
      caption.textContent = await loadText(texts[index]);
    }

    function showUI() {
      uiElements.forEach(el => el.classList.add("visible"));
      document.body.style.cursor = "default";

      clearTimeout(uiTimeout);
      uiTimeout = setTimeout(hideUI, UI_HIDE_DELAY);
    }

    function hideUI() {
      uiElements.forEach(el => el.classList.remove("visible"));
      document.body.style.cursor = "none";
    }

    document.getElementById("prev").onclick = () => showImage(index - 1);
    document.getElementById("next").onclick = () => showImage(index + 1);

    document.addEventListener("keydown", e => {
      showUI();
      if (e.key === "ArrowLeft") showImage(index - 1);
      if (e.key === "ArrowRight") showImage(index + 1);
      if (e.key.toLowerCase() === "f") toggleFullscreen();
    });

    document.addEventListener("mousemove", showUI);

    function toggleFullscreen() {
      if (!document.fullscreenElement) {
        viewer.requestFullscreen();
      } else {
        document.exitFullscreen();
      }
    }

    document.getElementById("fullscreen").onclick = toggleFullscreen;

    showImage(index);
    hideUI();
  </script>

</body>
</html>
